/*!
* MarchingSquaresJS
* version 1.2.3
* https://github.com/RaumZeit/MarchingSquares.js
*
* @license GNU Affero General Public License.
* Copyright (c) 2015-2018 Ronny Lorenz <ronny@tbi.univie.ac.at>
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.MarchingSquaresJS=e.MarchingSquaresJS||{})}(this,function(e){"use strict";var t={successCallback:null,verbose:!1,polygons:!1,polygons_full:!1,linearRing:!0},_=Object.assign({interpolate:function(e,t,n,a){return a<n&&(a=n=a),e<t?e<n?(n-e)/(t-e):(a-e)/(t-e):a<e?(e-a)/(e-t):(e-n)/(e-t)},interpolate_a:function(e,t,n,a){return e<t?(n-e)/(t-e):(e-a)/(e-t)},interpolate_b:function(e,t,n,a){return e<t?(a-e)/(t-e):(e-n)/(e-t)}},t);Object.assign({interpolate:function(e,t,n){return e<t?(n-e)/(t-e):(e-n)/(e-t)}},t);var m={lowerBound:null,upperBound:null,childA:null,childB:null,childC:null,childD:null};function V(e,t){return function e(t,n,a,o,r){var l=Object.assign({x:n,y:a,dx:o,dy:r},m),i=o,p=r,s=0,g=0;if(1===o&&1===r)l.lowerBound=Math.min(t[a][n],t[a][n+1],t[a+1][n+1],t[a+1][n]),l.upperBound=Math.max(t[a][n],t[a][n+1],t[a+1][n+1],t[a+1][n]);else{if(1<o){for(;0!==i;)i>>=1,s++;o===1<<s-1&&s--,i=1<<s-1}if(1<r){for(;0!==p;)p>>=1,g++;r===1<<g-1&&g--,p=1<<g-1}l.childA=e(t,n,a,i,p),l.lowerBound=l.childA.lowerBound,l.upperBound=l.childA.upperBound,0<o-i&&(l.childB=e(t,n+i,a,o-i,p),l.lowerBound=Math.min(l.lowerBound,l.childB.lowerBound),l.upperBound=Math.max(l.upperBound,l.childB.upperBound),0<r-p&&(l.childC=e(t,n+i,a+p,o-i,r-p),l.lowerBound=Math.min(l.lowerBound,l.childC.lowerBound),l.upperBound=Math.max(l.upperBound,l.childC.upperBound))),0<r-p&&(l.childD=e(t,n,a+p,i,r-p),l.lowerBound=Math.min(l.lowerBound,l.childD.lowerBound),l.upperBound=Math.max(l.upperBound,l.childD.upperBound))}return l}(e,0,0,e[0].length-1,e.length-1)}function x(e,t,n,a,o,r){var l=(a+n+t+e)/4;return r<l?2:l<o?0:1}m.getCells=function(e,t){var n=[];return this.lowerBound>t||this.upperBound<e||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.getCells(e,t))),this.childB&&(n=n.concat(this.childB.getCells(e,t))),this.childC&&(n=n.concat(this.childC.getCells(e,t))),this.childD&&(n=n.concat(this.childD.getCells(e,t)))):(this.lowerBound<=e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var c={square:function(e,t,n,a,o,r){r.polygons&&e.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(t,o,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,i],[l,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,i],[l,0],[0,0]])},triangle_br:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[1,i]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[l,0],[1,i],[1,0]])},triangle_tr:function(e,t,n,a,o,r){var l=r.interpolate(n,a,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV);r.polygons_full&&(e.edges.rt={path:[[1,l],[i,1]],move:{x:0,y:1,enter:"br"}}),r.polygons&&e.polygons.push([[1,l],[i,1],[1,1]])},triangle_tl:function(e,t,n,a,o,r){var l=r.interpolate(o,a,r.minV,r.maxV),i=r.interpolate(t,o,r.minV,r.maxV);r.polygons_full&&(e.edges.tl={path:[[l,1],[0,i]],move:{x:-1,y:0,enter:"rt"}}),r.polygons&&e.polygons.push([[0,i],[0,1],[l,1]])},tetragon_t:function(e,t,n,a,o,r){var l=r.interpolate(n,a,r.minV,r.maxV),i=r.interpolate(t,o,r.minV,r.maxV);r.polygons_full&&(e.edges.rt={path:[[1,l],[0,i]],move:{x:-1,y:0,enter:"rt"}}),r.polygons&&e.polygons.push([[0,i],[0,1],[1,1],[1,l]])},tetragon_r:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[i,1]],move:{x:0,y:1,enter:"br"}}),r.polygons&&e.polygons.push([[l,0],[i,1],[1,1],[1,0]])},tetragon_b:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[1,i]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[1,i],[1,0]])},tetragon_l:function(e,t,n,a,o,r){var l=r.interpolate(o,a,r.minV,r.maxV),i=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.tl={path:[[l,1],[i,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,1],[l,1],[i,0]])},tetragon_bl:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate_a(t,o,r.minV,r.maxV),s=r.interpolate_b(t,o,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[0,p]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,s],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[0,p],[0,s],[i,0]])},tetragon_br:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate_a(n,a,r.minV,r.maxV),s=r.interpolate_b(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[1,s]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,p],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[1,s],[1,p],[i,0]])},tetragon_tr:function(e,t,n,a,o,r){var l=r.interpolate_a(o,a,r.minV,r.maxV),i=r.interpolate_b(o,a,r.minV,r.maxV),p=r.interpolate_b(n,a,r.minV,r.maxV),s=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.rb={path:[[1,s],[l,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[i,1],[1,p]],move:{x:1,y:0,enter:"lt"}}),r.polygons&&e.polygons.push([[1,s],[l,1],[i,1],[1,p]])},tetragon_tl:function(e,t,n,a,o,r){var l=r.interpolate_a(o,a,r.minV,r.maxV),i=r.interpolate_b(o,a,r.minV,r.maxV),p=r.interpolate_b(t,o,r.minV,r.maxV),s=r.interpolate_a(t,o,r.minV,r.maxV);r.polygons_full&&(e.edges.tr={path:[[i,1],[0,s]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,p],[l,1]],move:{x:0,y:1,enter:"bl"}}),r.polygons&&e.polygons.push([[i,1],[0,s],[0,p],[l,1]])},tetragon_lr:function(e,t,n,a,o,r){var l=r.interpolate_a(t,o,r.minV,r.maxV),i=r.interpolate_b(t,o,r.minV,r.maxV),p=r.interpolate_b(n,a,r.minV,r.maxV),s=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.lt={path:[[0,i],[1,p]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,s],[0,l]],move:{x:-1,y:0,enter:"rb"}}),r.polygons&&e.polygons.push([[0,l],[0,i],[1,p],[1,s]])},tetragon_tb:function(e,t,n,a,o,r){var l=r.interpolate_a(o,a,r.minV,r.maxV),i=r.interpolate_b(o,a,r.minV,r.maxV),p=r.interpolate_b(t,n,r.minV,r.maxV),s=r.interpolate_a(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.tr={path:[[i,1],[p,0]],move:{x:0,y:-1,enter:"tr"}},e.edges.bl={path:[[s,0],[l,1]],move:{x:0,y:1,enter:"bl"}}),r.polygons&&e.polygons.push([[s,0],[l,1],[i,1],[p,0]])},pentagon_tr:function(e,t,n,a,o,r){var l=r.interpolate(o,a,r.minV,r.maxV),i=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.tl={path:[[l,1],[1,i]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[0,0],[0,1],[l,1],[1,i],[1,0]])},pentagon_tl:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[i,1]],move:{x:0,y:1,enter:"br"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[i,1],[1,1],[1,0]])},pentagon_br:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.rt={path:[[1,i],[l,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,1],[1,1],[1,i],[l,0]])},pentagon_bl:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[i,0],[0,l]],move:{x:-1,y:0,enter:"rt"}}),r.polygons&&e.polygons.push([[0,l],[0,1],[1,1],[1,0],[i,0]])},pentagon_tr_rl:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV),p=r.interpolate_b(n,a,r.minV,r.maxV),s=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.tl={path:[[i,1],[1,p]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,s],[0,l]],move:{x:-1,y:0,enter:"rt"}}),r.polygons&&e.polygons.push([[0,l],[0,1],[i,1],[1,p],[1,s]])},pentagon_rb_bt:function(e,t,n,a,o,r){var l=r.interpolate(n,a,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate_a(t,n,r.minV,r.maxV),s=r.interpolate(o,a,r.minV,r.maxV);r.polygons_full&&(e.edges.rt={path:[[1,l],[i,0]],move:{x:0,y:-1,enter:"tr"}},e.edges.bl={path:[[p,0],[s,1]],move:{x:0,y:1,enter:"br"}}),r.polygons&&e.polygons.push([[s,1],[1,1],[1,l],[i,0],[p,0]])},pentagon_bl_lr:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate_a(t,o,r.minV,r.maxV),p=r.interpolate_b(t,o,r.minV,r.maxV),s=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[0,i]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,p],[1,s]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[l,0],[0,i],[0,p],[1,s],[1,0]])},pentagon_lt_tb:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate_a(o,a,r.minV,r.maxV),p=r.interpolate_b(o,a,r.minV,r.maxV),s=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[i,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[p,1],[s,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[i,1],[p,1],[s,0]])},pentagon_bl_tb:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV),p=r.interpolate_b(t,n,r.minV,r.maxV),s=r.interpolate_a(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[i,1],[p,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[0,l],[0,1],[i,1],[p,0],[s,0]])},pentagon_lt_rl:function(e,t,n,a,o,r){var l=r.interpolate_a(t,o,r.minV,r.maxV),i=r.interpolate_b(t,o,r.minV,r.maxV),p=r.interpolate(o,a,r.minV,r.maxV),s=r.interpolate(n,o,r.minV,r.maxV);r.polygons_full&&(e.edges.lt={path:[[0,i],[p,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,s],[0,l]],move:{x:-1,y:0,enter:"rb"}}),r.polygons&&e.polygons.push([[0,l],[0,i],[p,1],[1,1],[1,s]])},pentagon_tr_bt:function(e,t,n,a,o,r){var l=r.interpolate_a(o,a,r.minV,r.maxV),i=r.interpolate_b(o,a,r.minV,r.maxV),p=r.interpolate(n,a,r.minV,r.maxV),s=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[s,0],[l,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[i,1],[1,p]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[l,1],[i,1],[1,p],[1,0],[s,0]])},pentagon_rb_lr:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate_b(n,a,r.minV,r.maxV),p=r.interpolate_a(n,a,r.minV,r.maxV),s=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[1,i]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,p],[s,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[1,i],[1,p],[s,0]])},hexagon_lt_tr:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate_a(o,a,r.minV,r.maxV),p=r.interpolate_b(o,a,r.minV,r.maxV),s=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[i,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[p,1],[1,s]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[i,1],[p,1],[1,s],[1,0]])},hexagon_bl_lt:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate_a(t,o,r.minV,r.maxV),p=r.interpolate_b(t,o,r.minV,r.maxV),s=r.interpolate(o,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[0,i]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,p],[s,1]],move:{x:0,y:1,enter:"br"}}),r.polygons&&e.polygons.push([[l,0],[0,i],[0,p],[s,1],[1,1],[1,0]])},hexagon_bl_rb:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate(t,o,r.minV,r.maxV),s=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[0,p]],move:{x:-1,y:0,enter:"rt"}},e.edges.rt={path:[[1,s],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[0,p],[0,1],[1,1],[1,s],[i,0]])},hexagon_tr_rb:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV),p=r.interpolate_b(n,a,r.minV,r.maxV),s=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.tl={path:[[i,1],[1,p]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,s],[l,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,1],[i,1],[1,p],[1,s],[l,0]])},hexagon_lt_rb:function(e,t,n,a,o,r){var l=r.interpolate(t,o,r.minV,r.maxV),i=r.interpolate(o,a,r.minV,r.maxV),p=r.interpolate(n,a,r.minV,r.maxV),s=r.interpolate(t,n,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,l],[i,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,p],[s,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,l],[i,1],[1,1],[1,p],[s,0]])},hexagon_bl_tr:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(t,o,r.minV,r.maxV),p=r.interpolate(o,a,r.minV,r.maxV),s=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[0,i]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[p,1],[1,s]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[l,0],[0,i],[0,1],[p,1],[1,s],[1,0]])},heptagon_tr:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate_a(t,o,r.minV,r.maxV),s=r.interpolate_b(t,o,r.minV,r.maxV),g=r.interpolate(o,a,r.minV,r.maxV),m=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[0,p]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,s],[g,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,m],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[0,p],[0,s],[g,1],[1,1],[1,m],[i,0]])},heptagon_bl:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate(t,o,r.minV,r.maxV),p=r.interpolate_a(o,a,r.minV,r.maxV),s=r.interpolate_b(o,a,r.minV,r.maxV),g=r.interpolate_b(n,a,r.minV,r.maxV),m=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.lb={path:[[0,i],[p,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[s,1],[1,g]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,m],[l,0]],move:{x:0,y:-1,enter:"tl"}}),r.polygons&&e.polygons.push([[0,0],[0,i],[p,1],[s,1],[1,g],[1,m],[l,0]])},heptagon_tl:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate(t,o,r.minV,r.maxV),s=r.interpolate(o,a,r.minV,r.maxV),g=r.interpolate_b(n,a,r.minV,r.maxV),m=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[0,p]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[s,1],[1,g]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,m],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[0,p],[0,1],[s,1],[1,g],[1,m],[i,0]])},heptagon_br:function(e,t,n,a,o,r){var l=r.interpolate(t,n,r.minV,r.maxV),i=r.interpolate_a(t,o,r.minV,r.maxV),p=r.interpolate_b(t,o,r.minV,r.maxV),s=r.interpolate_a(o,a,r.minV,r.maxV),g=r.interpolate_b(o,a,r.minV,r.maxV),m=r.interpolate(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.br={path:[[l,0],[0,i]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,p],[s,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[g,1],[1,m]],move:{x:1,y:0,enter:"lb"}}),r.polygons&&e.polygons.push([[l,0],[0,i],[0,p],[s,1],[g,1],[1,m],[1,0]])},octagon:function(e,t,n,a,o,r){var l=r.interpolate_a(t,n,r.minV,r.maxV),i=r.interpolate_b(t,n,r.minV,r.maxV),p=r.interpolate_a(t,o,r.minV,r.maxV),s=r.interpolate_b(t,o,r.minV,r.maxV),g=r.interpolate_a(o,a,r.minV,r.maxV),m=r.interpolate_b(o,a,r.minV,r.maxV),b=r.interpolate_b(n,a,r.minV,r.maxV),_=r.interpolate_a(n,a,r.minV,r.maxV);r.polygons_full&&(e.edges.bl={path:[[l,0],[0,p]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,s],[g,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[m,1],[1,b]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,_],[i,0]],move:{x:0,y:-1,enter:"tr"}}),r.polygons&&e.polygons.push([[l,0],[0,p],[0,s],[g,1],[m,1],[1,b],[1,_],[i,0]])}};function u(e,t,n,a){var o=0,r=e[n+1][t],l=e[n+1][t+1],i=e[n][t+1],p=e[n][t],s=a.minV,g=a.maxV;if(!(isNaN(p)||isNaN(i)||isNaN(l)||isNaN(r))){o|=r<s?0:g<r?128:64,o|=l<s?0:g<l?32:16,o|=i<s?0:g<i?8:4;var m=0,b={cval:o=+(o|=p<s?0:g<p?2:1),polygons:[],edges:{},x0:p,x1:i,x2:l,x3:r};switch(o){case 85:c.square(b,p,i,l,r,a);case 0:case 170:break;case 169:c.triangle_bl(b,p,i,l,r,a);break;case 166:c.triangle_br(b,p,i,l,r,a);break;case 154:c.triangle_tr(b,p,i,l,r,a);break;case 106:c.triangle_tl(b,p,i,l,r,a);break;case 1:c.triangle_bl(b,p,i,l,r,a);break;case 4:c.triangle_br(b,p,i,l,r,a);break;case 16:c.triangle_tr(b,p,i,l,r,a);break;case 64:c.triangle_tl(b,p,i,l,r,a);break;case 168:c.tetragon_bl(b,p,i,l,r,a);break;case 162:c.tetragon_br(b,p,i,l,r,a);break;case 138:c.tetragon_tr(b,p,i,l,r,a);break;case 42:c.tetragon_tl(b,p,i,l,r,a);break;case 2:c.tetragon_bl(b,p,i,l,r,a);break;case 8:c.tetragon_br(b,p,i,l,r,a);break;case 32:c.tetragon_tr(b,p,i,l,r,a);break;case 128:c.tetragon_tl(b,p,i,l,r,a);break;case 5:c.tetragon_b(b,p,i,l,r,a);break;case 20:c.tetragon_r(b,p,i,l,r,a);break;case 80:c.tetragon_t(b,p,i,l,r,a);break;case 65:c.tetragon_l(b,p,i,l,r,a);break;case 165:c.tetragon_b(b,p,i,l,r,a);break;case 150:c.tetragon_r(b,p,i,l,r,a);break;case 90:c.tetragon_t(b,p,i,l,r,a);break;case 105:c.tetragon_l(b,p,i,l,r,a);break;case 160:c.tetragon_lr(b,p,i,l,r,a);break;case 130:c.tetragon_tb(b,p,i,l,r,a);break;case 10:c.tetragon_lr(b,p,i,l,r,a);break;case 40:c.tetragon_tb(b,p,i,l,r,a);break;case 101:c.pentagon_tr(b,p,i,l,r,a);break;case 149:c.pentagon_tl(b,p,i,l,r,a);break;case 86:c.pentagon_bl(b,p,i,l,r,a);break;case 89:c.pentagon_br(b,p,i,l,r,a);break;case 69:c.pentagon_tr(b,p,i,l,r,a);break;case 21:c.pentagon_tl(b,p,i,l,r,a);break;case 84:c.pentagon_bl(b,p,i,l,r,a);break;case 81:c.pentagon_br(b,p,i,l,r,a);break;case 96:c.pentagon_tr_rl(b,p,i,l,r,a);break;case 24:c.pentagon_rb_bt(b,p,i,l,r,a);break;case 6:c.pentagon_bl_lr(b,p,i,l,r,a);break;case 129:c.pentagon_lt_tb(b,p,i,l,r,a);break;case 74:c.pentagon_tr_rl(b,p,i,l,r,a);break;case 146:c.pentagon_rb_bt(b,p,i,l,r,a);break;case 164:c.pentagon_bl_lr(b,p,i,l,r,a);break;case 41:c.pentagon_lt_tb(b,p,i,l,r,a);break;case 66:c.pentagon_bl_tb(b,p,i,l,r,a);break;case 144:c.pentagon_lt_rl(b,p,i,l,r,a);break;case 36:c.pentagon_tr_bt(b,p,i,l,r,a);break;case 9:c.pentagon_rb_lr(b,p,i,l,r,a);break;case 104:c.pentagon_bl_tb(b,p,i,l,r,a);break;case 26:c.pentagon_lt_rl(b,p,i,l,r,a);break;case 134:c.pentagon_tr_bt(b,p,i,l,r,a);break;case 161:c.pentagon_rb_lr(b,p,i,l,r,a);break;case 37:c.hexagon_lt_tr(b,p,i,l,r,a);break;case 148:c.hexagon_bl_lt(b,p,i,l,r,a);break;case 82:c.hexagon_bl_rb(b,p,i,l,r,a);break;case 73:c.hexagon_tr_rb(b,p,i,l,r,a);break;case 133:c.hexagon_lt_tr(b,p,i,l,r,a);break;case 22:c.hexagon_bl_lt(b,p,i,l,r,a);break;case 88:c.hexagon_bl_rb(b,p,i,l,r,a);break;case 97:c.hexagon_tr_rb(b,p,i,l,r,a);break;case 145:case 25:c.hexagon_lt_rb(b,p,i,l,r,a);break;case 70:case 100:c.hexagon_bl_tr(b,p,i,l,r,a);break;case 17:0===(m=x(p,i,l,r,s,g))?(c.triangle_bl(b,p,i,l,r,a),c.triangle_tr(b,p,i,l,r,a)):c.hexagon_lt_rb(b,p,i,l,r,a);break;case 68:0===(m=x(p,i,l,r,s,g))?(c.triangle_tl(b,p,i,l,r,a),c.triangle_br(b,p,i,l,r,a)):c.hexagon_bl_tr(b,p,i,l,r,a);break;case 153:2===(m=x(p,i,l,r,s,g))?(c.triangle_bl(b,p,i,l,r,a),c.triangle_tr(b,p,i,l,r,a)):c.hexagon_lt_rb(b,p,i,l,r,a);break;case 102:2===(m=x(p,i,l,r,s,g))?(c.triangle_tl(b,p,i,l,r,a),c.triangle_br(b,p,i,l,r,a)):c.hexagon_bl_tr(b,p,i,l,r,a);break;case 152:2===(m=x(p,i,l,r,s,g))?(c.triangle_tr(b,p,i,l,r,a),c.tetragon_bl(b,p,i,l,r,a)):c.heptagon_tr(b,p,i,l,r,a);break;case 137:2===(m=x(p,i,l,r,s,g))?(c.triangle_bl(b,p,i,l,r,a),c.tetragon_tr(b,p,i,l,r,a)):c.heptagon_bl(b,p,i,l,r,a);break;case 98:2===(m=x(p,i,l,r,s,g))?(c.triangle_tl(b,p,i,l,r,a),c.tetragon_br(b,p,i,l,r,a)):c.heptagon_tl(b,p,i,l,r,a);break;case 38:2===(m=x(p,i,l,r,s,g))?(c.triangle_br(b,p,i,l,r,a),c.tetragon_tl(b,p,i,l,r,a)):c.heptagon_br(b,p,i,l,r,a);break;case 18:0===(m=x(p,i,l,r,s,g))?(c.triangle_tr(b,p,i,l,r,a),c.tetragon_bl(b,p,i,l,r,a)):c.heptagon_tr(b,p,i,l,r,a);break;case 33:0===(m=x(p,i,l,r,s,g))?(c.triangle_bl(b,p,i,l,r,a),c.tetragon_tr(b,p,i,l,r,a)):c.heptagon_bl(b,p,i,l,r,a);break;case 72:0===(m=x(p,i,l,r,s,g))?(c.triangle_tl(b,p,i,l,r,a),c.tetragon_br(b,p,i,l,r,a)):c.heptagon_tl(b,p,i,l,r,a);break;case 132:0===(m=x(p,i,l,r,s,g))?(c.triangle_br(b,p,i,l,r,a),c.tetragon_tl(b,p,i,l,r,a)):c.heptagon_br(b,p,i,l,r,a);break;case 136:0===(m=x(p,i,l,r,s,g))?(c.tetragon_tl(b,p,i,l,r,a),c.tetragon_br(b,p,i,l,r,a)):1===m?c.octagon(b,p,i,l,r,a):(c.tetragon_bl(b,p,i,l,r,a),c.tetragon_tr(b,p,i,l,r,a));break;case 34:0===(m=x(p,i,l,r,s,g))?(c.tetragon_bl(b,p,i,l,r,a),c.tetragon_tr(b,p,i,l,r,a)):1===m?c.octagon(b,p,i,l,r,a):(c.tetragon_tl(b,p,i,l,r,a),c.tetragon_br(b,p,i,l,r,a))}return b}}e.isoBands=function(e,t,n,a){var o={};if(!e)throw new Error("data is required");if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("data should be an array of arrays");if(null==t)throw new Error("lowerBound is required");if(null==n)throw new Error("bandWidth is required");if(isNaN(+t))throw new Error("lowerBound must be a number");if(isNaN(+n))throw new Error("bandWidth must be a number");if(a&&"object"!=typeof a)throw new Error("options must be an object");a=a||{};for(var r=Object.keys(_),l=0;l<r.length;l++){var i=r[l],p=a[i];p=null!=p?p:_[i],o[i]=p}o.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+n)+"]"),o.polygons_full=!o.polygons;var s=t+Math.abs(n);o.minV=t,o.maxV=s,V(e).getCells(t,s).forEach(function(e){console.log(e)});for(var g,m={rows:e.length-1,cols:e[0].length-1,cells:[],minV:t,maxV:s},b=0;b<m.rows;++b)for(m.cells[b]=[],l=0;l<m.cols;++l)m.cells[b][l]=u(e,l,b,o);return o.polygons?(o.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),g=function(e,t){for(var n=e.rows,a=e.cols,o=[],r=0;r<n;r++)for(var l=0;l<a;l++)void 0!==e.cells[r][l]&&e.cells[r][l].polygons.forEach(function(e){e.forEach(function(e){e[0]+=l,e[1]+=r}),t.linearRing&&e.push(e[0]),o.push(e)});return o}(m,o)):(o.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),g=function(e,t){for(var n,a,o,r,l,i,p,s,g,m=e.rows,b=e.cols,_=[],V=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],x=[0,-1,0,1],c=[-1,0,1,0],u=["bl","lb","lt","tl","tr","rt","rb","br"],h={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0},y=!0,d=0;d<m;d++)if(e.cells[d][0].x0<e.minV||e.cells[d][0].x0>e.maxV||e.cells[d][b-1].x1<e.minV||e.cells[d][b-1].x1>e.maxV){y=!1;break}if(y&&(e.cells[m-1][0].x3<e.minV||e.cells[m-1][0].x3>e.maxV||e.cells[m-1][b-1].x2<e.minV||e.cells[m-1][b-1].x2>e.maxV)&&(y=!1),y)for(var f=0;f<b-1;f++)if(e.cells[0][f].x1<e.minV||e.cells[0][f].x1>e.maxV||e.cells[m-1][f].x2<e.minV||e.cells[m-1][f].x2>e.maxV){y=!1;break}for(y&&(t.linearRing?_.push([[0,0],[0,m],[b,m],[b,0],[0,0]]):_.push([[0,0],[0,m],[b,m],[b,0]])),d=0;d<m;d++)for(f=0;f<b;f++)if(void 0!==e.cells[d][f]){var v=e.cells[d][f];if(0===v.cval||85===v.cval||170===v.cval)continue;for(var k=null,B=0;B<8;B++)if(k=u[B],"object"==typeof v.edges[k]){var w=[],C=k,M=f,N=d,j=!1,A=[f+(E=v.edges[k]).path[0][0],d+E.path[0][1]];for(w.push(A);!j;){var q=e.cells[N][M];if("object"!=typeof q.edges[C])break;var E=q.edges[C];delete q.edges[C];var S=E.path[1];if(S[0]+=M,S[1]+=N,w.push(S),C=E.move.enter,M+=E.move.x,N+=E.move.y,void 0===e.cells[N]||void 0===e.cells[N][M]){var D=0,J=0;if(M===b?(M--,D=0):M<0?(M++,D=2):N===m?(N--,D=3):N<0&&(N++,D=1),M===f&&N===d&&D===h[k]){j=!0,C=k;break}for(;;){var O=!1;if(4<J){console.log("Direction change counter overflow! This should never happen!");break}q=e.cells[N][M];for(var R=0;R<V[D].length;R++){var W=V[D][R];if("object"==typeof q.edges[W]){E=q.edges[W],w.push((r=M,l=N,i=D,p=E.path,g=s=void 0,s=r,g=l,0===i?(s+=1,g+=p[0][1]):1===i?s+=p[0][0]:2===i?g+=p[0][1]:3===i&&(s+=p[0][0],g+=1),[s,g])),C=W,O=!0;break}}if(O)break;if(w.push((o=a=void 0,a=M,o=N,0===(n=D)?a++:1===n||(2===n?o++:3===n&&(a++,o++)),[a,o])),M+=x[D],N+=c[D],void 0!==e.cells[N]&&void 0!==e.cells[N][M]||(M-=x[D],N-=c[D],D=(D+1)%4,J++),M===f&&N===d&&D===h[k]){j=!0,C=k;break}}}}!t.linearRing||w[w.length-1][0]===A[0]&&w[w.length-1][1]===A[1]||w.push(A),_.push(w)}}return _}(m,o)),"function"==typeof o.successCallback&&o.successCallback(g),g},Object.defineProperty(e,"__esModule",{value:!0})});
